{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import 'flatpickr/dist/flatpickr.min.css';\nimport flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst calendars = document.querySelector('#datetime-picker');\nconst startButton = document.querySelector('button[data-start]');\nconst daysValue = document.querySelector('[data-days]');\nconst hoursValue = document.querySelector('[data-hours]');\nconst minutesValue = document.querySelector('[data-minutes]');\nconst secondsValue = document.querySelector('[data-seconds]');\n\nlet userSelectedDate = {};\nlet countdownInterval;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = new Date(selectedDates[0]).getTime();\n    changeButtonState();\n  },\n  onChange(selectedDates) {\n    userSelectedDate = new Date(selectedDates[0]).getTime();\n    changeButtonState();\n  },\n};\n\ndisableStartButton();\nflatpickr(calendars, options);\n\nstartButton.addEventListener('click', () => {\n  const selectedDate = new Date(calendars._flatpickr.selectedDates[0]);\n  disableStartButton();\n  startCountdown(selectedDate);\n});\n\nfunction changeButtonState() {\n  const currentDate = Date.now();\n  const timeDifference = userSelectedDate - currentDate;\n  if (timeDifference > 0) enableStartButton();\n  else {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please choose a date in the future',\n      position: 'topRight',\n    });\n    disableStartButton();\n  }\n}\n\nfunction disableStartButton() {\n  startButton.disabled = true;\n  startButton.style.opacity = 0.4;\n  startButton.style.pointerEvents = 'none';\n}\n\nfunction enableStartButton() {\n  startButton.disabled = false;\n  startButton.style.opacity = 1;\n  startButton.style.cursor = 'pointer';\n  startButton.style.pointerEvents = 'auto';\n}\n\nfunction addLeadingZero(value) {\n  return value < 10 ? `0${value}` : value;\n}\n\nfunction startCountdown(targetDate) {\n  clearInterval(countdownInterval);\n\n  if (isNaN(targetDate)) {\n    console.error('Invalid date.');\n    return;\n  }\n\n  countdownInterval = setInterval(() => {\n    const now = new Date();\n    const difference = targetDate - now;\n\n    if (difference <= 0) {\n      clearInterval(countdownInterval);\n      updateTimerDisplay(convertMs(0));\n      iziToast.success({\n        title: 'Success',\n        message: 'Countdown finished!',\n        position: 'topRight',\n      });\n      enableStartButton();\n    } else {\n      updateTimerDisplay(convertMs(difference));\n    }\n  }, 1000);\n}\n\nfunction updateTimerDisplay(time) {\n  daysValue.textContent = addLeadingZero(time.days);\n  hoursValue.textContent = addLeadingZero(time.hours);\n  minutesValue.textContent = addLeadingZero(time.minutes);\n  secondsValue.textContent = addLeadingZero(time.seconds);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["calendars","startButton","daysValue","hoursValue","minutesValue","secondsValue","userSelectedDate","countdownInterval","options","selectedDates","changeButtonState","disableStartButton","flatpickr","selectedDate","startCountdown","currentDate","enableStartButton","iziToast","addLeadingZero","value","targetDate","difference","updateTimerDisplay","convertMs","time","ms","days","hours","minutes","seconds"],"mappings":"+IAKA,MAAMA,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAE5D,IAAIC,EAAmB,CAAA,EACnBC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBH,EAAmB,IAAI,KAAKG,EAAc,CAAC,CAAC,EAAE,UAC9CC,GACD,EACD,SAASD,EAAe,CACtBH,EAAmB,IAAI,KAAKG,EAAc,CAAC,CAAC,EAAE,UAC9CC,GACD,CACH,EAEAC,IACAC,EAAUZ,EAAWQ,CAAO,EAE5BP,EAAY,iBAAiB,QAAS,IAAM,CAC1C,MAAMY,EAAe,IAAI,KAAKb,EAAU,WAAW,cAAc,CAAC,CAAC,EACnEW,IACAG,EAAeD,CAAY,CAC7B,CAAC,EAED,SAASH,GAAoB,CAC3B,MAAMK,EAAc,KAAK,MACFT,EAAmBS,EACrB,EAAGC,KAEtBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,UAChB,CAAK,EACDN,IAEJ,CAEA,SAASA,GAAqB,CAC5BV,EAAY,SAAW,GACvBA,EAAY,MAAM,QAAU,GAC5BA,EAAY,MAAM,cAAgB,MACpC,CAEA,SAASe,GAAoB,CAC3Bf,EAAY,SAAW,GACvBA,EAAY,MAAM,QAAU,EAC5BA,EAAY,MAAM,OAAS,UAC3BA,EAAY,MAAM,cAAgB,MACpC,CAEA,SAASiB,EAAeC,EAAO,CAC7B,OAAOA,EAAQ,GAAK,IAAIA,CAAK,GAAKA,CACpC,CAEA,SAASL,EAAeM,EAAY,CAGlC,GAFA,cAAcb,CAAiB,EAE3B,MAAMa,CAAU,EAAG,CACrB,QAAQ,MAAM,eAAe,EAC7B,MACD,CAEDb,EAAoB,YAAY,IAAM,CAEpC,MAAMc,EAAaD,EADP,IAAI,KAGZC,GAAc,GAChB,cAAcd,CAAiB,EAC/Be,EAAmBC,EAAU,CAAC,CAAC,EAC/BN,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,sBACT,SAAU,UAClB,CAAO,EACDD,KAEAM,EAAmBC,EAAUF,CAAU,CAAC,CAE3C,EAAE,GAAI,CACT,CAEA,SAASC,EAAmBE,EAAM,CAChCtB,EAAU,YAAcgB,EAAeM,EAAK,IAAI,EAChDrB,EAAW,YAAce,EAAeM,EAAK,KAAK,EAClDpB,EAAa,YAAcc,EAAeM,EAAK,OAAO,EACtDnB,EAAa,YAAca,EAAeM,EAAK,OAAO,CACxD,CAEA,SAASD,EAAUE,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}